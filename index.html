<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PR Badge Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        body { 
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0c0a1f 0%, #1a0b33 25%, #2d1b4e 50%, #1a0b33 75%, #0c0a1f 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .floating-orb {
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
            animation: float 20s infinite linear;
        }
        
        .floating-orb:nth-child(1) {
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #e879f9, #c084fc);
            top: 20%;
            left: 10%;
            animation-delay: -5s;
        }
        
        .floating-orb:nth-child(2) {
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, #60a5fa, #3b82f6);
            top: 60%;
            right: 20%;
            animation-delay: -10s;
        }
        
        .floating-orb:nth-child(3) {
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, #34d399, #10b981);
            bottom: 30%;
            left: 20%;
            animation-delay: -15s;
        }

        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(100px, -100px) rotate(90deg); }
            50% { transform: translate(200px, -50px) rotate(180deg); }
            75% { transform: translate(50px, 100px) rotate(270deg); }
            100% { transform: translate(0, 0) rotate(360deg); }
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.12);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4), 
                        0 0 0 1px rgba(255, 255, 255, 0.05) inset;
        }

        .glass-input {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .glass-input:focus {
            background: rgba(0, 0, 0, 0.5);
            border-color: rgba(168, 85, 247, 0.6);
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.15),
                        0 0 20px rgba(168, 85, 247, 0.3);
        }

        .neon-button {
            background: linear-gradient(135deg, #6366f1, #8b5cf6, #d946ef);
            box-shadow: 0 0 20px rgba(168, 85, 247, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .neon-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(168, 85, 247, 0.6),
                        0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .sparkle {
            position: relative;
            overflow: hidden;
        }

        .sparkle::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
            animation: sparkle 3s infinite;
            border-radius: inherit;
        }

        @keyframes sparkle {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(300%) rotate(45deg); }
        }

        .pulse-ring {
            animation: pulse-ring 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite;
        }

        @keyframes pulse-ring {
            0% {
                transform: scale(0.8);
                opacity: 1;
            }
            80%, 100% {
                transform: scale(1.2);
                opacity: 0;
            }
        }

        .badge-preview-container {
            background: radial-gradient(ellipse at center, rgba(168, 85, 247, 0.1) 0%, rgba(0, 0, 0, 0.3) 70%);
            border: 1px solid rgba(168, 85, 247, 0.2);
        }

        .code-block {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.6), rgba(15, 23, 42, 0.8));
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section-header {
            background: linear-gradient(90deg, rgba(168, 85, 247, 0.8), rgba(236, 72, 153, 0.8));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .feature-icon {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            animation: pulse-ring 2s infinite;
        }

        select option {
            background: #1a1a2e;
            color: white;
        }

        .status-indicator {
            animation: pulse 2s infinite;
        }

        .hero-title {
            background: linear-gradient(135deg, #60a5fa, #a855f7, #ec4899, #f59e0b);
            background-size: 300% 300%;
            animation: gradientShift 8s ease infinite;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .slide-in {
            animation: slideInUp 0.6s ease-out forwards;
        }

        .copy-feedback {
            transition: all 0.3s ease;
        }

        .copy-feedback.success {
            background: linear-gradient(135deg, #10b981, #059669) !important;
            transform: scale(0.95);
        }

        .grid-background {
            background-image: 
                linear-gradient(rgba(168, 85, 247, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(168, 85, 247, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
        }
    </style>
</head>
<body class="min-h-screen text-white overflow-x-hidden">
    
    <!-- Floating Background Orbs -->
    <div class="fixed inset-0 pointer-events-none overflow-hidden">
        <div class="floating-orb"></div>
        <div class="floating-orb"></div>
        <div class="floating-orb"></div>
    </div>

    <!-- Grid Background -->
    <div class="fixed inset-0 grid-background opacity-30 pointer-events-none"></div>
    
    <!-- Hero Section -->
    <div class="relative flex flex-col items-center justify-center px-6 py-16">
        <div class="text-center mb-16 slide-in">
            <div class="mb-6">
                <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 mb-6 feature-icon">
                    <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5H9a2 2 0 00-2 2v12a4 4 0 004 4h6a2 2 0 002-2V7a2 2 0 00-2-2z"></path>
                    </svg>
                </div>
            </div>
            <h1 class="text-7xl lg:text-8xl font-black mb-6 hero-title leading-none pb-4">
                PR Badge Generator
            </h1>
            <p class="text-gray-300 text-xl lg:text-2xl max-w-3xl mx-auto leading-relaxed font-light">
                Create <span class="text-purple-400 font-semibold">stunning, professional badges</span> for your GitHub pull requests. 
                <br class="hidden lg:block">
                No external dependencies — <span class="text-pink-400 font-semibold">pure SVG generation</span>.
            </p>
            <div class="flex flex-wrap justify-center gap-4 mt-8">
                <div class="px-4 py-2 bg-white/10 rounded-full text-sm font-medium">
                    ✨ Real-time Preview
                </div>
                <div class="px-4 py-2 bg-white/10 rounded-full text-sm font-medium">
                    🎨 Multiple Themes
                </div>
                <div class="px-4 py-2 bg-white/10 rounded-full text-sm font-medium">
                    📋 One-click Copy
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 xl:grid-cols-5 gap-8 w-full max-w-7xl">
            
            <!-- Form Section -->
            <div class="xl:col-span-2 glass-card p-10 rounded-3xl sparkle slide-in" style="animation-delay: 0.2s">
                <div class="flex items-center mb-8">
                    <div class="w-4 h-4 bg-purple-400 rounded-full mr-4 status-indicator"></div>
                    <h2 class="text-3xl font-bold section-header">Configure Badge</h2>
                </div>
                
                <form id="badge-form" class="space-y-8">
                    <div class="space-y-3">
                        <label for="title" class="block text-sm font-semibold text-purple-200 tracking-wide uppercase">
                            PR Title
                        </label>
                        <input id="title" type="text" maxlength="100" placeholder="Add amazing new feature" value="Add amazing new feature"
                            class="w-full px-6 py-4 rounded-2xl glass-input text-white placeholder-gray-400 text-lg font-medium"/>
                    </div>

                    <div class="grid grid-cols-2 gap-6">
                        <div class="space-y-3">
                            <label for="repo" class="block text-sm font-semibold text-purple-200 tracking-wide uppercase">
                                Repository
                            </label>
                            <input id="repo" type="text" maxlength="50" placeholder="owner/repo" value="owner/repo"
                                class="w-full px-6 py-4 rounded-2xl glass-input text-white placeholder-gray-400 font-medium"/>
                        </div>
                        
                        <div class="space-y-3">
                            <label for="number" class="block text-sm font-semibold text-purple-200 tracking-wide uppercase">
                                PR Number
                            </label>
                            <input id="number" type="text" maxlength="10" placeholder="1234" value="1234"
                                class="w-full px-6 py-4 rounded-2xl glass-input text-white placeholder-gray-400 font-medium"/>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-6">
                        <div class="space-y-3">
                            <label for="status" class="block text-sm font-semibold text-purple-200 tracking-wide uppercase">
                                Status
                            </label>
                            <select id="status" class="w-full px-6 py-4 rounded-2xl glass-input text-white font-medium appearance-none cursor-pointer bg-gradient-to-r from-transparent to-transparent">
                                <option value="OPEN">🟢 Open</option>
                                <option value="MERGED">🟣 Merged</option>
                                <option value="CLOSED">🔴 Closed</option>
                                <option value="DRAFT">📝 Draft</option>
                            </select>
                        </div>
                        
                        <div class="space-y-3">
                            <label for="author" class="block text-sm font-semibold text-purple-200 tracking-wide uppercase">
                                Author
                            </label>
                            <input id="author" type="text" maxlength="30" placeholder="username" value="dev"
                                class="w-full px-6 py-4 rounded-2xl glass-input text-white placeholder-gray-400 font-medium"/>
                        </div>
                    </div>

                    <div class="space-y-3">
                        <label for="theme" class="block text-sm font-semibold text-purple-200 tracking-wide uppercase">
                            Theme
                        </label>
                        <select id="theme" class="w-full px-6 py-4 rounded-2xl glass-input text-white font-medium appearance-none cursor-pointer">
                            <option value="modern">✨ Modern</option>
                            <option value="neon">🌈 Neon Glow</option>
                            <option value="dark">🌙 Dark Mode</option>
                        </select>
                    </div>
                </form>
            </div>

            <!-- Preview Section -->
            <div class="xl:col-span-3 flex flex-col space-y-8">
                <!-- Live Preview -->
                <div class="glass-card p-10 rounded-3xl slide-in" style="animation-delay: 0.4s">
                    <div class="text-center mb-8">
                        <div class="flex items-center justify-center mb-6">
                            <div class="w-4 h-4 bg-pink-400 rounded-full mr-4 status-indicator"></div>
                            <h3 class="text-3xl font-bold section-header">Live Preview</h3>
                        </div>
                        <div class="badge-preview-container rounded-3xl p-8 min-h-[140px] flex items-center justify-center overflow-x-auto">
                            <div id="badge-preview" class="transition-all duration-500 hover:scale-105 flex-shrink-0 filter drop-shadow-2xl"></div>
                        </div>
                        <p class="text-sm text-gray-400 mt-4 flex items-center justify-center">
                            <span class="w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"></span>
                            Real-time SVG generation
                        </p>
                    </div>

                    <!-- Action Buttons -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <button id="copy-markdown" class="px-8 py-4 neon-button rounded-2xl font-bold text-white shadow-2xl relative overflow-hidden group">
                            <span class="relative z-10 flex items-center justify-center">
                                <span class="mr-2">📋</span>
                                Copy Markdown
                            </span>
                        </button>
                        <button id="copy-html" class="px-8 py-4 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-2xl font-bold text-white shadow-2xl hover:shadow-cyan-500/25 transition-all duration-300 hover:-translate-y-1">
                            <span class="flex items-center justify-center">
                                <span class="mr-2">🔗</span>
                                Copy HTML
                            </span>
                        </button>
                        <button id="download-svg" class="px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl font-bold text-white shadow-2xl hover:shadow-emerald-500/25 transition-all duration-300 hover:-translate-y-1">
                            <span class="flex items-center justify-center">
                                <span class="mr-2">💾</span>
                                Download SVG
                            </span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Output Section -->
    <div class="flex justify-center w-full px-6 pb-16">
        <div class="glass-card p-10 rounded-3xl w-full max-w-7xl slide-in" style="animation-delay: 0.6s">
            <div class="flex items-center mb-10">
                <div class="w-4 h-4 bg-green-400 rounded-full mr-4 status-indicator"></div>
                <h2 class="text-3xl font-bold section-header">Generated Code</h2>
            </div>
            
            <div class="space-y-8">
                <div class="group">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-bold text-green-200 flex items-center">
                            📝 Markdown (for README.md)
                        </h3>
                        <button id="copy-md-btn" class="px-4 py-2 bg-green-600 hover:bg-green-500 rounded-xl transition-all duration-200 font-semibold text-sm copy-feedback">
                            Copy
                        </button>
                    </div>
                    <div class="code-block p-6 rounded-2xl">
                        <pre id="markdown-output" class="text-green-300 text-sm overflow-x-auto font-mono whitespace-pre-wrap"></pre>
                    </div>
                </div>
                
                <div class="group">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-bold text-blue-200 flex items-center">
                            🌐 HTML (for websites)
                        </h3>
                        <button id="copy-html-btn" class="px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-xl transition-all duration-200 font-semibold text-sm copy-feedback">
                            Copy
                        </button>
                    </div>
                    <div class="code-block p-6 rounded-2xl">
                        <pre id="html-output" class="text-blue-300 text-sm overflow-x-auto font-mono whitespace-pre-wrap"></pre>
                    </div>
                </div>

                <div class="group">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-bold text-purple-200 flex items-center">
                            🎨 Direct SVG Code
                        </h3>
                        <button id="copy-svg-btn" class="px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-xl transition-all duration-200 font-semibold text-sm copy-feedback">
                            Copy
                        </button>
                    </div>
                    <div class="code-block p-6 rounded-2xl max-h-48 overflow-y-auto">
                        <pre id="svg-output" class="text-purple-300 text-xs overflow-x-auto font-mono whitespace-pre-wrap"></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Footer -->
    <div class="relative text-center text-gray-400 py-12 border-t border-white/10">
        <div class="max-w-4xl mx-auto px-6">
            <div class="flex flex-col items-center space-y-4">
                <div class="flex items-center space-x-2 text-2xl">
                    <span>🚀</span>
                    <span class="text-transparent bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text font-bold">
                        Built with
                    </span>
                    <span class="text-red-400">❤️</span>
                    <span class="text-transparent bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text font-bold">
                        for better GitHub workflows
                    </span>
                </div>
                <div class="flex flex-wrap justify-center gap-6 text-sm">
                    <span class="flex items-center space-x-1">
                        <span class="w-2 h-2 bg-purple-400 rounded-full"></span>
                        <span>Generate beautiful PR badges</span>
                    </span>
                    <span class="flex items-center space-x-1">
                        <span class="w-2 h-2 bg-pink-400 rounded-full"></span>
                        <span>No external dependencies</span>
                    </span>
                    <span class="flex items-center space-x-1">
                        <span class="w-2 h-2 bg-blue-400 rounded-full"></span>
                        <span>Pure SVG</span>
                    </span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Theme configurations
        const themes = {
            modern: {
                titleBg: '#1e293b',
                titleColor: '#ffffff',
                subtitleColor: '#cbd5e1',
                statusBg: '#334155',
                infoBg: '#0f172a',
                infoColor: '#94a3b8',
                gradient: true,
                shadow: true,
                borderRadius: 6
            },
            github: {
                titleBg: '#24292f',
                titleColor: '#ffffff',
                subtitleColor: '#8b949e',
                statusBg: '#21262d',
                infoBg: '#161b22',
                infoColor: '#7d8590',
                gradient: false,
                shadow: false,
                borderRadius: 6
            },
            minimal: {
                titleBg: '#374151',
                titleColor: '#f9fafb',
                subtitleColor: '#d1d5db',
                statusBg: '#4b5563',
                infoBg: '#1f2937',
                infoColor: '#9ca3af',
                gradient: false,
                shadow: false,
                borderRadius: 6
            },
            neon: {
                titleBg: '#0c0a1f',
                titleColor: '#e879f9',
                subtitleColor: '#c084fc',
                statusBg: '#1e1b3a',
                infoBg: '#2d1b4e',
                infoColor: '#a78bfa',
                gradient: true,
                shadow: true,
                borderRadius: 6,
                glow: true
            },
            dark: {
                titleBg: '#111827',
                titleColor: '#f3f4f6',
                subtitleColor: '#9ca3af',
                statusBg: '#1f2937',
                infoBg: '#030712',
                infoColor: '#6b7280',
                gradient: false,
                shadow: true,
                borderRadius: 6
            }
        };

        // Status configurations
        const statusConfigs = {
            OPEN: { color: '#22c55e', icon: '●', label: 'OPEN' },
            MERGED: { color: '#a855f7', icon: '✓', label: 'MERGED' },
            CLOSED: { color: '#ef4444', icon: '✕', label: 'CLOSED' },
            DRAFT: { color: '#f59e0b', icon: '◐', label: 'DRAFT' }
        };

        // DOM elements
        const elements = {
            form: document.getElementById('badge-form'),
            preview: document.getElementById('badge-preview'),
            markdownOutput: document.getElementById('markdown-output'),
            htmlOutput: document.getElementById('html-output'),
            svgOutput: document.getElementById('svg-output'),
            copyMarkdown: document.getElementById('copy-markdown'),
            copyHtml: document.getElementById('copy-html'),
            downloadSvg: document.getElementById('download-svg'),
            copyMdBtn: document.getElementById('copy-md-btn'),
            copyHtmlBtn: document.getElementById('copy-html-btn'),
            copySvgBtn: document.getElementById('copy-svg-btn')
        };

        // Get form values
        function getFormData() {
            return {
                title: document.getElementById('title').value || 'Add amazing new feature',
                repo: document.getElementById('repo').value || 'owner/repo',
                number: document.getElementById('number').value || '1234',
                status: document.getElementById('status').value || 'OPEN',
                author: document.getElementById('author').value || 'dev',
                theme: document.getElementById('theme').value || 'modern'
            };
        }

        // Generate SVG badge
        function generateSVG(data) {
            const theme = themes[data.theme];
            const statusConfig = statusConfigs[data.status];
            
            // Dimensions
            const height = 60;
            const padding = 16;
            const statusWidth = 120;
            const infoWidth = 100;
            
            // Calculate title width dynamically
            const charWidth = 7.5;
            const titleWidth = Math.max(300, data.title.length * charWidth + padding * 2);
            const totalWidth = titleWidth + statusWidth + infoWidth;
            
            // Truncate title if too long
            const maxTitleLength = 80;
            const displayTitle = data.title.length > maxTitleLength ? 
                data.title.substring(0, maxTitleLength - 1) + '…' : data.title;

            // Create gradients and effects
            const createDefs = () => {
                let defs = '<defs>';
                
                if (theme.gradient) {
                    defs += `
                        <linearGradient id="titleGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:${theme.titleBg};stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#1a1a2e;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="statusGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:${statusConfig.color};stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#2d1b69;stop-opacity:1" />
                        </linearGradient>`;
                }
                
                if (theme.shadow) {
                    defs += `
                        <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
                            <feDropShadow dx="0" dy="3" stdDeviation="3" flood-color="#000000" flood-opacity="0.3"/>
                        </filter>`;
                }
                
                if (theme.glow) {
                    defs += `
                        <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                            <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                            <feMerge>
                                <feMergeNode in="coloredBlur"/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>`;
                }
                
                defs += '</defs>';
                return defs;
            };

            return `
<svg xmlns="http://www.w3.org/2000/svg" width="${totalWidth}" height="${height}" role="img" aria-label="Pull Request Badge">
    ${createDefs()}
    
    <!-- Main container -->
    <rect x="0" y="0" width="${totalWidth}" height="${height}" 
          fill="${theme.titleBg}" 
          rx="${theme.borderRadius}" ry="${theme.borderRadius}"
          ${theme.shadow ? 'filter="url(#shadow)"' : ''}/>
    
    <!-- Title section -->
    <rect x="0" y="0" width="${titleWidth}" height="${height}" 
          fill="${theme.gradient ? 'url(#titleGrad)' : theme.titleBg}" 
          rx="${theme.borderRadius}" ry="${theme.borderRadius}"/>
    
    <!-- PR Title -->
    <text x="${padding}" y="22" fill="${theme.titleColor}" 
          font-size="14" font-weight="700" font-family="Inter, sans-serif"
          ${theme.glow ? 'filter="url(#glow)"' : ''}>
        ${displayTitle}
    </text>
    
    <!-- Repo and PR info -->
    <text x="${padding}" y="40" fill="${theme.subtitleColor}" 
          font-size="11" font-weight="500" font-family="Inter, sans-serif">
        📂 ${data.repo} • #${data.number} • @${data.author}
    </text>
    
    <!-- Status section -->
    <rect x="${titleWidth}" y="0" width="${statusWidth}" height="${height}" 
          fill="${theme.gradient ? 'url(#statusGrad)' : statusConfig.color}"
          ${theme.glow ? 'filter="url(#glow)"' : ''}/>
    
    <text x="${titleWidth + 16}" y="32" fill="#ffffff" 
          font-size="18" font-weight="600">${statusConfig.icon}</text>
    <text x="${titleWidth + 40}" y="32" fill="#ffffff" 
          font-size="12" font-weight="700" font-family="Inter, sans-serif">${statusConfig.label}</text>
    
    <!-- Info section -->
    <rect x="${titleWidth + statusWidth}" y="0" width="${infoWidth}" height="${height}" 
          fill="${theme.infoBg}" 
          rx="${theme.borderRadius}" ry="${theme.borderRadius}"/>
    
    <text x="${titleWidth + statusWidth + infoWidth/2}" y="24" 
          fill="${theme.infoColor}" font-size="10" font-weight="600" 
          text-anchor="middle" font-family="Inter, sans-serif">PR</text>
    <text x="${titleWidth + statusWidth + infoWidth/2}" y="38" 
          fill="${theme.infoColor}" font-size="10" font-weight="600" 
          text-anchor="middle" font-family="Inter, sans-serif">BADGE</text>
    
    <!-- Separators -->
    <line x1="${titleWidth}" y1="6" x2="${titleWidth}" y2="${height-6}" 
          stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
    <line x1="${titleWidth + statusWidth}" y1="6" x2="${titleWidth + statusWidth}" y2="${height-6}" 
          stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
</svg>`.trim();
        }

        // Update all outputs
        function updateBadge() {
            const data = getFormData();
            
            // Build API URL for badge
            const apiUrl = `/api/badge?title=${encodeURIComponent(data.title)}&repo=${encodeURIComponent(data.repo)}&number=${encodeURIComponent(data.number)}&status=${encodeURIComponent(data.status)}&author=${encodeURIComponent(data.author)}&theme=${encodeURIComponent(data.theme)}`;
            
            // Production domain for markdown/html
            const prodDomain = "https://pr-req-io.vercel.app";
            const badgeUrl = `${prodDomain}${apiUrl}`;
            const prUrl = `https://github.com/${data.repo}/pull/${data.number.replace('#', '')}`;
            
            // Update preview with API call
            elements.preview.innerHTML = `<img src="${apiUrl}" alt="PR Badge" style="height: 60px; min-width: 400px; border-radius: 12px; box-shadow: 0 8px 32px rgba(168, 85, 247, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.1);" />`;
            
            // Generate SVG code for download
            const svgCode = generateSVG(data);
            
            // Update outputs
            const markdownCode = `[![${data.title}](${badgeUrl})](${prUrl})`;
            const htmlCode = `<a href="${prUrl}"><img src="${badgeUrl}" alt="${data.title}" /></a>`;
            
            elements.markdownOutput.textContent = markdownCode;
            elements.htmlOutput.textContent = htmlCode;
            elements.svgOutput.textContent = svgCode;
        }

        // Enhanced copy functionality with visual feedback
        async function copyToClipboard(text, button) {
            try {
                await navigator.clipboard.writeText(text);
                const originalText = button.textContent;
                const originalClasses = button.className;
                
                // Add success state
                button.textContent = '✅ Copied!';
                button.classList.add('success');
                
                // Create ripple effect
                const ripple = document.createElement('div');
                ripple.style.cssText = `
                    position: absolute;
                    background: rgba(255, 255, 255, 0.4);
                    border-radius: 50%;
                    transform: scale(0);
                    animation: ripple 0.6s linear;
                    pointer-events: none;
                `;
                
                const rect = button.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                ripple.style.width = ripple.style.height = size + 'px';
                ripple.style.left = '50%';
                ripple.style.top = '50%';
                ripple.style.transform = 'translate(-50%, -50%) scale(0)';
                
                button.style.position = 'relative';
                button.appendChild(ripple);
                
                // Add ripple animation
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes ripple {
                        to {
                            transform: translate(-50%, -50%) scale(2);
                            opacity: 0;
                        }
                    }
                `;
                document.head.appendChild(style);
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.className = originalClasses;
                    if (ripple.parentNode) ripple.remove();
                    if (style.parentNode) style.remove();
                }, 2500);
                
            } catch (err) {
                console.error('Failed to copy:', err);
                // Fallback visual feedback for error
                button.textContent = '❌ Failed';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            }
        }

        // Download SVG with enhanced feedback
        function downloadSVG() {
            const data = getFormData();
            const svgCode = generateSVG(data);
            const blob = new Blob([svgCode], { type: 'image/svg+xml' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `pr-badge-${data.repo.replace('/', '-')}-${data.number}.svg`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            // Visual feedback
            const button = elements.downloadSvg;
            const originalText = button.innerHTML;
            button.innerHTML = '<span class="flex items-center justify-center"><span class="mr-2">✅</span>Downloaded!</span>';
            button.style.transform = 'scale(0.95)';
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.style.transform = '';
            }, 2000);
        }

        // Add input focus effects
        function addInputEffects() {
            const inputs = document.querySelectorAll('input, select');
            inputs.forEach(input => {
                input.addEventListener('focus', (e) => {
                    e.target.style.transform = 'translateY(-1px)';
                    e.target.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
                });
                
                input.addEventListener('blur', (e) => {
                    e.target.style.transform = '';
                });
                
                input.addEventListener('input', (e) => {
                    // Add subtle glow on input
                    e.target.style.boxShadow = '0 0 20px rgba(168, 85, 247, 0.2)';
                    setTimeout(() => {
                        e.target.style.boxShadow = '';
                    }, 300);
                });
            });
        }

        // Event listeners
        elements.form.addEventListener('input', updateBadge);

        elements.copyMarkdown.addEventListener('click', () => 
            copyToClipboard(elements.markdownOutput.textContent, elements.copyMarkdown));
        
        elements.copyHtml.addEventListener('click', () => 
            copyToClipboard(elements.htmlOutput.textContent, elements.copyHtml));
        
        elements.downloadSvg.addEventListener('click', downloadSVG);

        elements.copyMdBtn.addEventListener('click', () => 
            copyToClipboard(elements.markdownOutput.textContent, elements.copyMdBtn));
        
        elements.copyHtmlBtn.addEventListener('click', () => 
            copyToClipboard(elements.htmlOutput.textContent, elements.copyHtmlBtn));
        
        elements.copySvgBtn.addEventListener('click', () => 
            copyToClipboard(elements.svgOutput.textContent, elements.copySvgBtn));

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateBadge();
            addInputEffects();
            
            // Add staggered animation to slide-in elements
            const slideElements = document.querySelectorAll('.slide-in');
            slideElements.forEach((el, index) => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(30px)';
                setTimeout(() => {
                    el.style.transition = 'all 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, index * 200);
            });
        });
    </script>
