<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PR Badge Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-purple-900 via-purple-800 to-purple-900 min-h-screen text-white flex items-center justify-center p-6">
  <div class="w-full max-w-6xl grid grid-cols-1 lg:grid-cols-2 gap-8">
    
    <!-- Left panel -->
    <div class="bg-purple-950/40 backdrop-blur-lg rounded-2xl p-6 shadow-xl border border-purple-700/40">
      <h2 class="text-2xl font-bold mb-6 flex items-center gap-2">
        <span class="text-pink-400">‚Ä¢</span> Configure Your Badge
      </h2>
      <form class="space-y-4">
        <div>
          <label class="block text-sm text-purple-200 mb-1">PR Title</label>
          <input id="title" type="text" placeholder="Enter PR Title"
            class="w-full px-4 py-2 rounded-lg bg-purple-900/40 border border-purple-700/40 focus:ring-2 focus:ring-pink-400 focus:outline-none"/>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm text-purple-200 mb-1">Repository</label>
            <input id="repo" type="text" placeholder="owner/repo"
              class="w-full px-4 py-2 rounded-lg bg-purple-900/40 border border-purple-700/40 focus:ring-2 focus:ring-pink-400 focus:outline-none"/>
          </div>
          <div>
            <label class="block text-sm text-purple-200 mb-1">PR Number</label>
            <input id="number" type="text" placeholder="#1234"
              class="w-full px-4 py-2 rounded-lg bg-purple-900/40 border border-purple-700/40 focus:ring-2 focus:ring-pink-400 focus:outline-none"/>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm text-purple-200 mb-1">Status</label>
            <select id="status"
              class="w-full px-4 py-2 rounded-lg bg-purple-900/40 border border-purple-700/40 focus:ring-2 focus:ring-pink-400 focus:outline-none">
              <option>Open</option>
              <option>Merged</option>
              <option>Closed</option>
            </select>
          </div>
          <div>
            <label class="block text-sm text-purple-200 mb-1">Date</label>
            <input id="date" type="text" placeholder="Jul 28"
              class="w-full px-4 py-2 rounded-lg bg-purple-900/40 border border-purple-700/40 focus:ring-2 focus:ring-pink-400 focus:outline-none"/>
          </div>
        </div>
        <div>
          <label class="block text-sm text-purple-200 mb-1">Theme</label>
          <select id="theme"
            class="w-full px-4 py-2 rounded-lg bg-purple-900/40 border border-purple-700/40 focus:ring-2 focus:ring-pink-400 focus:outline-none">
            <option>Modern (Default)</option>
            <option>Classic</option>
          </select>
        </div>
      </form>
    </div>

    <!-- Right panel -->
    <div class="bg-purple-950/40 backdrop-blur-lg rounded-2xl p-6 shadow-xl border border-purple-700/40 flex flex-col justify-between">
      <h2 class="text-2xl font-bold mb-6 flex items-center gap-2">
        <span class="text-pink-400">‚Ä¢</span> Live Preview
      </h2>
      <div class="flex-1 flex items-center justify-center bg-purple-900/20 rounded-xl border border-purple-700/30 p-4 overflow-x-auto">
        <img id="badge-preview" 
             class="h-[60px] w-auto rounded-lg shadow-2xl transition-all duration-300 hover:scale-105 max-w-none" 
             src="/api/badge?title=Add%20amazing%20new%20feature&repo=owner/repo&number=%231234&status=OPEN&date=Jul%2028&theme=modern" 
             alt="PR Badge Preview"/>
      </div>
      <div class="flex justify-center gap-4 mt-6">
        <button id="copy-markdown"
                class="px-6 py-2 rounded-lg bg-pink-500 hover:bg-pink-600 text-white font-semibold shadow-lg transition-all">
          üìã Copy Markdown
        </button>
        <a id="download-svg" 
           class="px-6 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white font-semibold shadow-lg transition-all"
           download="badge.svg">
          ‚¨áÔ∏è Download SVG
        </a>
      </div>
    </div>
  </div>

  <script>
    function updateBadge() {
      const title = encodeURIComponent(document.getElementById("title").value || "Add amazing new feature");
      const repo = encodeURIComponent(document.getElementById("repo").value || "owner/repo");
      const number = encodeURIComponent(document.getElementById("number").value || "#1234");
      const status = encodeURIComponent(document.getElementById("status").value || "OPEN");
      const date = encodeURIComponent(document.getElementById("date").value || "Jul 28");
      const theme = encodeURIComponent(document.getElementById("theme").value.toLowerCase() || "modern");

      const url = `/api/badge?title=${title}&repo=${repo}&number=${number}&status=${status}&date=${date}&theme=${theme}`;
      
      document.getElementById("badge-preview").src = url;
      document.getElementById("download-svg").href = url;
      
      document.getElementById("copy-markdown").onclick = () => {
        const markdown = `![PR Badge](${url})`;
        navigator.clipboard.writeText(markdown);
        alert("Markdown copied to clipboard!");
      };
    }

    document.querySelectorAll("input, select").forEach(el => {
      el.addEventListener("input", updateBadge);
      el.addEventListener("change", updateBadge);
    });
    
    updateBadge();
  </script>
</body>
</html>
